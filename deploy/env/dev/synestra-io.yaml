# Dev values for synestra.io deployment (non-secret only).

env:
  SYNESTRA_ENV: "dev"
  NEXT_PUBLIC_SERVER_URL: "https://dev.synestra.io"
  # `web-app` chart runs `next start` by default, so NODE_ENV should be `production`.
  # For Okteto hot-dev (`next dev`) we set NODE_ENV=development in `.okteto/okteto.yml`.
  NODE_ENV: "production"
  SYNESTRA_DB_SOURCE: "cnpg-databases"
  SYNESTRA_MEDIA_STORAGE: "s3"
  S3_ENDPOINT: "http://minio-web-synestra-io.object-storage-web-core.svc.cluster.local:9000"
  S3_BUCKET: "payload-media"
  S3_REGION: "us-east-1"
  S3_FORCE_PATH_STYLE: "true"

envFrom:
  secretRef: "web-synestra-io-dev-env"
  extraSecretRefs:
    - "web-synestra-io-dev-s3-env"

ingress:
  enabled: true
  hosts:
    - host: "dev.synestra.io"
      paths:
        - path: /
          pathType: Prefix

persistence:
  media:
    enabled: false
    mountPath: /repo/apps/synestra-io/public/media

postgres:
  enabled: false

# Okteto Resource Manager заметил, что текущие requests слишком малы (throttling/eviction risk).
# Держим requests чуть выше рекомендаций, чтобы dev был стабильным.
resources:
  requests:
    cpu: 150m
    memory: 256Mi
  limits:
    cpu: 1000m
    memory: 1Gi
