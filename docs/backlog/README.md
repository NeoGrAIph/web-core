# Backlog (технический)

Здесь фиксируем технический долг / проблемы, которые уже проявились в проде или имеют высокий риск проявиться, с коротким каноном “как правильно” и конкретными задачами для исправления.

## Шаблон backlog-документа

Скопируй этот шаблон при создании нового файла в `docs/backlog/*.md`.

```md
# Backlog: <короткий заголовок проблемы>

Статус: **draft | актуально | решено | отменено**
Дата: **YYYY-MM-DD**
Затрагивает: **prod | stage | dev | template | chart | platform**
Владение: **app | platform | shared**

## Контекст

Почему это важно и где проявляется.

## Симптомы

- Что видит пользователь/команда (логи/ошибки/HTTP-коды).

## Root cause (гипотеза → подтверждение)

- Что именно сломано и почему.
- Как подтвердили (команды/проверки).

## Канон (как правильно)

- Норматив: “так делаем всегда”.
- Ограничения/исключения (если есть).

## Варианты решения

- Вариант A (предпочтительный): плюсы/минусы/риски/объём.
- Вариант B: …

## План работ

### Must (DoD)

- [ ] …

### Should

- [ ] …

### Could

- [ ] …

## Проверки / регрессии

- Команды (build/typecheck), smoke сценарии, метрики.

## Связанные артефакты

- Код: `path/to/file.ts`
- Values/Charts: `deploy/...`
- Runbooks: `docs/runbooks/...`
- Issues/PR/коммиты: (ссылки)
```

Правила:
- 1 документ = 1 проблема (без “сборников”).
- Обязательно заполнять **Канон** и **Must (DoD)**.
- Если проблема затрагивает прод — добавляй конкретные даты/версии/теги образов.

## Индекс

- `next-media-route.md` — проблема с кастомным Next route для `/api/media/file/*`, который конфликтует с Payload и ломает S3 storage.
